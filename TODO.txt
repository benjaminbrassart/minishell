handle too many args (malloc failed?)
fix output checking in test script
check for memory/fd leaks
